local Players = game:GetService("Players")
local localPlayer = Players.LocalPlayer

local function addESP(character)
	-- Ignore yourself
	if character == localPlayer.Character then return end

	local hrp = character:WaitForChild("HumanoidRootPart", 5)
	if not hrp then return end

	-- Prevent duplicate boxes
	if hrp:FindFirstChild("RedESP") then return end

	local box = Instance.new("SelectionBox")
	box.Name = "RedESP"
	box.Adornee = character
	box.AlwaysOnTop = true -- ðŸ‘ˆ visible through walls
	box.LineThickness = 0.08
	box.Transparency = 0

	-- Maximum red
	box.Color3 = Color3.new(1, 0, 0)

	box.Parent = hrp
end

-- Existing players
for _, player in ipairs(Players:GetPlayers()) do
	if player ~= localPlayer and player.Character then
		addESP(player.Character)
	end
end

-- New players / respawns
Players.PlayerAdded:Connect(function(player)
	player.CharacterAdded:Connect(function(character)
		addESP(character)
	end)
end)

for _, player in ipairs(Players:GetPlayers()) do
	player.CharacterAdded:Connect(function(character)
		addESP(character)
	end)
end
