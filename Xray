local Players = game:GetService("Players")
local localPlayer = Players.LocalPlayer

-- Function to add a red box to a character
local function addBox(character)
	-- Don't add a box to yourself
	if character == localPlayer.Character then return end

	local humanoidRootPart = character:WaitForChild("HumanoidRootPart", 5)
	if not humanoidRootPart then return end

	-- Prevent duplicates
	if humanoidRootPart:FindFirstChild("LocalRedBox") then return end

	local box = Instance.new("SelectionBox")
	box.Name = "LocalRedBox"
	box.Adornee = character
	box.LineThickness = 0.05
	box.Color3 = Color3.fromRGB(255, 0, 0)
	box.Transparency = 0
	box.Parent = humanoidRootPart
end

-- Add boxes to existing players
for _, player in ipairs(Players:GetPlayers()) do
	if player ~= localPlayer and player.Character then
		addBox(player.Character)
	end
end

-- Add boxes when players spawn
Players.PlayerAdded:Connect(function(player)
	player.CharacterAdded:Connect(function(character)
		addBox(character)
	end)
end)

-- Add boxes when characters respawn
Players.PlayerRemoving:Connect(function(player)
	-- Boxes auto-clean up since they are local
end)
